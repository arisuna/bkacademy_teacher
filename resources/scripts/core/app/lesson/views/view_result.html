<form class="form-validate pd-0 mg-0"
      validate-form=""
      ng-submit="saveFn()"
      novalidate>
    <div class="custom-dialog-overflow scroll-append scroll-y overflow-x-disable ">
        <div class="row">
            <div class="col-sm-12">
                <angular-table table="table"
                           items="lesson.students"
                           ng-if="!page_loading && lesson.students.length > 0"
                           search-input-enable="false">
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th class="text-dark-blue bd-b-white">#</th>
                            <th class="text-dark-blue bd-b-white">{{'NAME_TEXT' | translate }}</th>
                            <th class="text-dark-blue bd-b-white">{{'SCORE_TEXT' | translate }}</th>
                            <th class="text-dark-blue bd-b-white" ng-if="lesson.had_homework == 1">{{'HOME_SCORE_TEXT' | translate }}</th>
                            <th class="text-dark-blue bd-b-white"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="(index, object) in table.pagedItems[table.currentPage]" class="relo-bg-bright-gray-4 bd-r-5 border-white">
                            <td class="bd-t-white">{{ index + 1}}</td>
                        <td  class="bd-t-white">
                            <div ng-click="editLessonFn( object )"
                                class="wrap-word text-bright-blue">{{ object.student.lastname }} {{ object.student.firstname }}
                            </div>
                        </td>
                        <td class="bd-t-white">{{ object.score }}</td>
                        <td class="bd-t-white" ng-if="lesson.had_homework == 1">{{ object.home_score }}</td>
                        <td class="text-right bd-t-white">
                            <button-edit-icon ng-click="editStudentScoreFn( object )" class="mr-sm"></button-edit-icon>
                        </td>
                        </tr>

                        </tbody>
                    </table>
                </angular-table>
            </div>
        </div>
    </div>
    <div class="custom-dialog-overflow scroll-append scroll-y scroll-x ">
        <div class="row">
            <div class="col-sm-12" ng-if="!page_loading && lesson.students.length > 0">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th class="text-dark-blue bd-b-white width-200">#</th>
                        <th class="text-dark-blue bd-b-white" ng-repeat="(index, object) in lesson.students" >{{ object.student.lastname }} {{ object.student.firstname }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr   class="relo-bg-bright-gray-4 bd-r-5 border-white">
                        <td class="bd-t-white">{{'SCORE_TEXT' | translate }}</td>
                        <td  class="bd-t-white" ng-repeat="(index, object) in lesson.students">
                            <input-text is-editable="true"
                                        is-required="false"
                                        is-numeric="true"
                                        ng-model="object.score"
                                        required-message="ENTER_SCORE_TEXT"
                                        label="SCORE_TEXT"
                                        show-label="true"></input-text>
                        </td>
                    </tr>
                    <tr   class="relo-bg-bright-gray-4 bd-r-5 border-white" ng-repeat="(index1, category) in lesson.categories">
                        <td class="bd-t-white">{{category.code}} - {{category.name}}</td>
                        <td  class="bd-t-white" ng-repeat="(index, object) in lesson.students">
                            
                            <select class="chosen-select form-control" chosen="" ng-model="object.categories[category.id].score"
                                ng-options="rate.value as (rate.label | translate) for rate in ratings"
                                data-placeholder-text-single="'- Select rating'">
                            <option></option>
                        </td>
                    </tr>
                    <tr   class="relo-bg-bright-gray-4 bd-r-5 border-white">
                        <td class="bd-t-white">{{'HOME_SCORE_TEXT' | translate }}</td>
                        <td  class="bd-t-white" ng-repeat="(index, object) in lesson.students">
                            <input-text is-editable="true"
                                        is-required="false"
                                        is-numeric="true"
                                        ng-model="object.home_score"
                                        required-message="ENTER_HOME_SCORE_TEXT"
                                        label="HOME_SCORE_TEXT"
                                        show-label="true"></input-text>
                        </td>
                    </tr>
                    <tr   class="relo-bg-bright-gray-4 bd-r-5 border-white" ng-repeat="(index1, category) in lesson.home_categories">
                        <td class="bd-t-white width-200">{{category.code}} - {{category.name}}</td>
                        <td  class="bd-t-white" ng-repeat="(index, object) in lesson.students">
                            <select class="chosen-select form-control" chosen="" ng-model="object.home_categories[category.id].score"
                                ng-options="rate.value as (rate.label | translate) for rate in ratings"
                                data-placeholder-text-single="'- Select rating'">
                            <option></option>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="text-right mg-t-20"  app-acl-allow="lesson/edit"
    acl-remove="true">
        <save-button-submit title="SAVE_BTN_TEXT" ng-disabled="saving" ng-if="isEditable" ></save-button-submit>
    </div>
</form>
